---
title: 浏览器常用Api记录
date: 2021-02-06
tags:
  - 前端
  - 备忘
categories: code
---

## js

| Api                    | 说明               |
| ---------------------- | ------------------ |
| `IntersectionObserver` | 元素是否进入了视图 |
| `window.innerWidth`    | 屏幕设备宽度       |


## IntersectionObserver的使用
[mdn文档](https://developer.mozilla.org/zh-CN/docs/Web/API/IntersectionObserver)

这个属性用来做图片懒加载非常好用 ，已经被主流的浏览器支持，除了ie

```js
const imgs = document.querySelectorAll("img");

const observer = new IntersectionObserver((nodes) => {
  nodes.forEach((v) => {
    if (v.isIntersecting) {
      console.log("进入了可视区域");
      // 判断是否进入可视区域
      v.target.src = v.target.dataset.src; // 赋值加载图片
      // observer.unobserve(v.target); // 停止监听已加载的图片
    }else{
      console.log("移出区域");
    }
  });
});
imgs.forEach((i) => observer.observe(i));
```