(window.webpackJsonp=window.webpackJsonp||[]).push([[127],{661:function(t,s,e){"use strict";e.r(s);var a=e(5),n=Object(a.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h2",{attrs:{id:"获取镜像的途径"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#获取镜像的途径"}},[t._v("#")]),t._v(" 获取镜像的途径")]),t._v(" "),e("h3",{attrs:{id:"_1-从网络上进行拉取-pull-from-registry"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-从网络上进行拉取-pull-from-registry"}},[t._v("#")]),t._v(" 1. 从网络上进行拉取 "),e("code",[t._v("pull from registry")])]),t._v(" "),e("blockquote",[e("p",[t._v("最简单的方式，就像我们拉取nginx的容器一样，只需要输入一行命令即可，通常由社区维护")])]),t._v(" "),e("p",[t._v("我们需要的库可以从"),e("a",{attrs:{href:"https://hub.docker.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("docker hub"),e("OutboundLink")],1),t._v(" 上面寻找，这个就有点像github")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://quay.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("quay.io"),e("OutboundLink")],1),t._v("也有库")]),t._v(" "),e("p",[t._v("等我们学会了第二种方式以后，也可以上传自己的镜像")]),t._v(" "),e("p",[e("strong",[t._v("拉取一个镜像")]),t._v(" ， 以"),e("a",{attrs:{href:"https://hub.docker.com/_/wordpress",target:"_blank",rel:"noopener noreferrer"}},[t._v("wordpress"),e("OutboundLink")],1),t._v(" 为例")]),t._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[t._v("docker pull wordpress\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 拉取下来查看也有的警醒")]),t._v("\n\ndocker image "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看镜像的基本信息")]),t._v("\ndocker image inspect 容器id\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 删除镜像")]),t._v("\ndocker image "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" 镜像id\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br")])]),e("h3",{attrs:{id:"_2-dockerfile-依然需要联网"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-dockerfile-依然需要联网"}},[t._v("#")]),t._v(" 2. Dockerfile , 依然需要联网")]),t._v(" "),e("blockquote",[e("p",[t._v("最难的方式，需要我们学习一些dockerfile的语法知识 ，也是扩展性最强的，这样我们才能构建自己的docker惊喜，下面我会详细介绍"),e("a",{attrs:{href:"#dockerfile"}},[t._v("dockerfile")])])]),t._v(" "),e("h3",{attrs:{id:"_3-自有文件导入-不需要文件也能进行"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-自有文件导入-不需要文件也能进行"}},[t._v("#")]),t._v(" 3. 自有文件导入，不需要文件也能进行")]),t._v(" "),e("blockquote",[e("p",[t._v("在公司中可能最常用到")])]),t._v(" "),e("p",[e("strong",[t._v("导出")])]),t._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# nginx:latest 为导出的名字")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# -o 后面跟着的是你的镜像的名字")]),t._v("\ndocker image save nginx:latest  -o myTest.image\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br")])]),e("p",[t._v("输入完成后这时我们就可以在文件夹内找到刚刚导出的镜像")]),t._v(" "),e("p",[e("strong",[t._v("导入")])]),t._v(" "),e("p",[t._v("上面我们已经导出")]),t._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[t._v("docker image load -i ."),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("myTest.image\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("h2",{attrs:{id:"dockerfile"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile"}},[t._v("#")]),t._v(" Dockerfile")]),t._v(" "),e("p",[t._v("什么是dockerfile ？")]),t._v(" "),e("p",[t._v("dockerfile是用来构建docker镜像的文件，而镜像可以组成文件从而投入到使用")]),t._v(" "),e("h3",{attrs:{id:"使用dockerfile构建一个镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用dockerfile构建一个镜像"}},[t._v("#")]),t._v(" 使用dockerfile构建一个镜像")]),t._v(" "),e("blockquote",[e("p",[t._v("这里我们使用的是Python来构建 ，不懂Python也没事，我也不懂....")])]),t._v(" "),e("ol",[e("li",[e("p",[t._v("创建一个文件件 随便命名一个自己喜欢的名字")])]),t._v(" "),e("li",[e("p",[t._v("创建"),e("code",[t._v("test.py")]),t._v("文件，在文件内输入内容")])])]),t._v(" "),e("div",{staticClass:"language-py line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-py"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hello dockerfile'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("ol",{attrs:{start:"3"}},[e("li",[t._v("新建一个"),e("code",[t._v("dockerfile")]),t._v("的文件，在文件内输入以下内容")])]),t._v(" "),e("div",{staticClass:"language-dockerfile line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 引入一个我们要使用的库  :latest 是版本号")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" ubuntu"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("latest\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 引入Python环境")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("RUN")]),t._v(" apt"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("get update && \\\nDEBIAN_FRONTEND=noninteractive apt"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("get install "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("no"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("install"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("recommends "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("y python3.9 python3"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("pip python3.9"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("dev\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 映入我们自己写的Python文件")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ADD")]),t._v(" test.py /\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 执行命令")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CMD")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"python3"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"test.py"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br")])]),e("ol",{attrs:{start:"4"}},[e("li",[t._v("执行下面的命令")])]),t._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# test1 是我自定义的")]),t._v("\ndocker image build  -t  test1 "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br")])]),e("p",[t._v("构建完成后使用"),e("code",[t._v("docker image ls")]),t._v("来查看我们构建的镜像")]),t._v(" "),e("ol",{attrs:{start:"5"}},[e("li",[t._v("执行"),e("code",[t._v("docker run test1")]),t._v("查看输出")])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://i.loli.net/2021/10/06/kfAzr9QHxYES5GP.png",alt:""}})]),t._v(" "),e("h3",{attrs:{id:"dockerfile-常用指令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile-常用指令"}},[t._v("#")]),t._v(" dockerfile 常用指令")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"center"}},[t._v("指令")]),t._v(" "),e("th",[t._v("作用")]),t._v(" "),e("th",[t._v("示例")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"center"}},[e("code",[t._v("FROM")])]),t._v(" "),e("td",[t._v("引入一个包，通常是hub上的")]),t._v(" "),e("td",[e("code",[t._v("FROM node:alpine3.11")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[e("code",[t._v("RUN")])]),t._v(" "),e("td",[t._v("执行"),e("code",[t._v("sh")]),t._v("命令")]),t._v(" "),e("td",[e("code",[t._v("RUN command")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[e("code",[t._v("ADD")]),t._v(" / "),e("code",[t._v("COPY")])]),t._v(" "),e("td",[t._v("在你的镜像中添加文件，区别在于"),e("code",[t._v("ADD")]),t._v("可以将压缩的文件解压")]),t._v(" "),e("td",[e("code",[t._v("ADD source dest")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[e("code",[t._v("CMD")]),t._v("  /"),e("code",[t._v("ENTRYPOINT")])]),t._v(" "),e("td",[t._v("在容器中执行命令 ,"),e("strong",[t._v("区别："),e("code",[t._v("ENTRYPOINT")]),t._v("不会被覆盖")])]),t._v(" "),e("td",[e("code",[t._v('CMD [ "node" , "app/index.js" ]')])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[e("code",[t._v("WORKDIR")])]),t._v(" "),e("td",[t._v("切换目录，有点像"),e("code",[t._v("cd")]),t._v("命令")]),t._v(" "),e("td",[e("code",[t._v("WORKDIR /the/workdir/path")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[e("code",[t._v("ENV")]),t._v(" / "),e("code",[t._v("ARG")])]),t._v(" "),e("td",[t._v("声明变量")]),t._v(" "),e("td",[e("code",[t._v("ENV key=value")])])])])]),t._v(" "),e("h2",{attrs:{id:"将镜像分享到dockerhub"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#将镜像分享到dockerhub"}},[t._v("#")]),t._v(" 将镜像分享到dockerHub")]),t._v(" "),e("ol",[e("li",[t._v("我们先登录"),e("a",{attrs:{href:"https://hub.docker.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("dockerHub"),e("OutboundLink")],1),t._v(" 找到自己的dockerId")])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://i.loli.net/2021/10/06/YIgWGHsRZ1dpbNk.png",alt:""}})]),t._v(" "),e("ol",{attrs:{start:"2"}},[e("li",[t._v("因为docker上传的格式属于"),e("code",[t._v("docker/仓库名")]),t._v("，所以刚才我们使用的名字"),e("code",[t._v("test1")]),t._v("不符合上传规则 ,使用以下的命令更改名字")])]),t._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[t._v("docker image tag test1 kuangw11/test1\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("ol",{attrs:{start:"3"}},[e("li",[e("p",[t._v("使用"),e("code",[t._v("docker login")]),t._v(" 命令进行登录")])]),t._v(" "),e("li",[e("p",[t._v("使用下面的命令进行上传")])])]),t._v(" "),e("div",{staticClass:"language-language line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("docker image push kuangw11/test1\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("p",[t._v("成功后我们就可以在hub上看到自己刚刚上传的仓库了")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://i.loli.net/2021/10/06/XSALKUikrzpYjwv.png",alt:""}})])])}),[],!1,null,null,null);s.default=n.exports}}]);