(window.webpackJsonp=window.webpackJsonp||[]).push([[126],{660:function(s,n,a){"use strict";a.r(n);var e=a(5),t=Object(e.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"为什么会有docker-docker是什么"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么会有docker-docker是什么"}},[s._v("#")]),s._v(" 为什么会有docker？ docker是什么?")]),s._v(" "),a("p",[s._v("在学习一门技术前，必须要了解它解决了什么问题，docker作为当前当红的技术，也是着着实实的解决了开发中一些常见的问题痛点。")]),s._v(" "),a("p",[s._v("开发中除了开发写代码以外，还要去上线，而上线就会涉及到环境的安装。有时候我们常常遇到在本地能跑，在线上却出了问题，这往往就是环境的问题，比如在前端中 ,可能就要用到  "),a("code",[s._v("node")]),s._v(" 、 "),a("code",[s._v("nginx")]),s._v(" ，而后端则需要更多的依赖，一台服务器可能要跑多个服务，而服务与服务之间，就可能产生冲突，而且部署多个服务也是一件费时费力且没有技术含量的事情。")]),s._v(" "),a("p",[s._v("而docker就是解决这个问题而生，它可以一并的将环境一起推送到生产环境，一键部署。")]),s._v(" "),a("h2",{attrs:{id:"docker的安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker的安装"}},[s._v("#")]),s._v(" docker的安装")]),s._v(" "),a("h3",{attrs:{id:"win10-安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#win10-安装"}},[s._v("#")]),s._v(" win10 安装")]),s._v(" "),a("ol",[a("li",[s._v("开启"),a("code",[s._v("hyper-v")]),s._v("服务 （windows自带的虚拟服务）")])]),s._v(" "),a("ul",[a("li",[s._v("输入命令 (使用管理员模式运行改命令)")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Hyper-V -All\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("进入"),a("code",[s._v("程序与任务模式")]),s._v(" (右键卸载任意软件时就会进入该界面)，")])]),s._v(" "),a("p",[a("img",{attrs:{src:"//image.woai996.com/picgo/20211003230818.png",alt:""}})]),s._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",[s._v("可能遇到"),a("code",[s._v("Enable-WindowsOptionalFeature")]),s._v(" 不是命令的报错")]),s._v(" "),a("p",[s._v("将以下代码保存为一个"),a("code",[s._v("hype-v.cmd")]),s._v(" ,然后以 "),a("strong",[s._v("管理员身份运行")]),s._v(" 后即可安装"),a("code",[s._v("hype-v")]),s._v("功能")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('pushd "%~dp0"\ndir /b %SystemRoot%\\servicing\\Packages\\*Hyper-V*.mum >hyper-v.txt\nfor /f %%i in (\'findstr /i . hyper-v.txt 2^>nul\') do dism /online /norestart /add-package:"%SystemRoot%\\servicing\\Packages\\%%i"\ndel hyper-v.txt\nDism /online /enable-feature /featurename:Microsoft-Hyper-V-All /LimitAccess /ALL\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])])]),s._v(" "),a("ul",[a("li",[s._v("进入"),a("a",{attrs:{href:"https://www.docker.com/products/docker-desktop",target:"_blank",rel:"noopener noreferrer"}},[s._v("官网下载链接"),a("OutboundLink")],1),s._v("下载安装启动即可")])]),s._v(" "),a("p",[s._v("中途遇到了这个报错，使用cmd 运行此命令后解决问题")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("netsh winsock reset\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://i.loli.net/2021/10/06/ZUPN1X6guVA2BDC.png",alt:""}})]),s._v(" "),a("p",[s._v("如果有遇到说版本wsl太低了，可以"),a("a",{attrs:{href:"https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi",target:"_blank",rel:"noopener noreferrer"}},[s._v("手动更新一下版本即可"),a("OutboundLink")],1)]),s._v(" "),a("p",[a("strong",[s._v("最后输入 "),a("code",[s._v("docker version")])]),s._v(" 检查是否安装成功")]),s._v(" "),a("h3",{attrs:{id:"linux-安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#linux-安装"}},[s._v("#")]),s._v(" linux 安装")]),s._v(" "),a("p",[a("strong",[s._v("按步骤输入以下的命令")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -fsSL get.docker.com -o get-docker.sh\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" get-docker.sh\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动nginx服务")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" docker start\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看是否安装成功")]),s._v("\n\ndocker version\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("h2",{attrs:{id:"常用指令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常用指令"}},[s._v("#")]),s._v(" 常用指令")]),s._v(" "),a("p",[a("strong",[s._v("创建容器")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# nginx 库名 如果本地没有时，回去 docker hub 上拉取")]),s._v("\ndocker container run nginx\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("strong",[s._v("查看正在运行的容器")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看正在运行的容器")]),s._v("\ndocker container "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看所有容器")]),s._v("\ndocker container "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -a\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看所有容器id号")]),s._v("\ndocker container "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -aq\n\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://i.loli.net/2021/10/06/5nDf6yjMZKvhUe3.png",alt:""}})]),s._v(" "),a("p",[a("strong",[s._v("停止一个容器")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 容器id 可以通过 ls 或者ps 命令查看，而且只需要打上前2-3位即可")]),s._v("\ndocker container stop 容器id\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 停止所有容器，这里使用了组合命令")]),s._v("\ndocker stop "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("docker "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -q"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 之后我们可以使用 ls 或者ps 命令来进行验证")]),s._v("\ndocker "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://i.loli.net/2021/10/06/3RgryXwqNPuDhKU.png",alt:"容器id图示"}})]),s._v(" "),a("p",[a("strong",[s._v("删除一个容器")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("docker container "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" 容器id\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 不需要停止也能删除")]),s._v("\ndocker container "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" 容器id -f\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除全部的镜像或者容器")]),s._v("\ndocker image prune -a\ndocker container prune -a\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[s._v("以上的指令除了ls以外，都可以忽略"),a("code",[s._v("container")]),s._v("来达到简写效果")]),s._v(" "),a("h2",{attrs:{id:"端口映射"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#端口映射"}},[s._v("#")]),s._v(" 端口映射")]),s._v(" "),a("p",[s._v("在上面的例子中,我们启动过nginx的容器,但是发现,在本机的80端口实际是没法访问这个服务的，这是因为我们没有映射好端口")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2021/10/06/AZQiWl7V1jNyrXu.png",alt:""}})]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定nginx的端口 前台运行")]),s._v("\ndocker run -p "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v(":80 nginx \n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定nginx的端口 后台运行 区别在于你即便关掉了中断 服务依然存在")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 但是后台运行模式无法看到访问日志，而前台可以")]),s._v("\n\ndocker run -d -p "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("90")]),s._v(":80 nginx\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将后台运行的服务转为前台运行")]),s._v("\ndocker attach 容器id\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("p",[s._v("这时候再访问 就可以看到启动的服务了")]),s._v(" "),a("p",[s._v("后台运行模式无法看到访问日志 , 我们可以使用此命令来跟踪日志")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("docker logs -f 容器id\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"交互模式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#交互模式"}},[s._v("#")]),s._v(" 交互模式")]),s._v(" "),a("p",[a("strong",[s._v("启动交互模式")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -it 代表启动交互模式  sh 代表使用shell进行控制 这种属于直接进入交互模式")]),s._v("\ndocker container run -it ubuntu "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 常用的交互命令")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看文件目录")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("hostname")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看系统id")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("clear")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 清除日志")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 退出")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入后台模式启动的交互")]),s._v("\n\ndocker "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" -it 容器id "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])])])}),[],!1,null,null,null);n.default=t.exports}}]);