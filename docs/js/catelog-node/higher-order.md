---
title: js的高阶函数和闭包
date: 2020-11-13
tags:
 - js
 - 前端
categories: code
---

## 什么是高阶函数 ？ 满足以下其中一个条件就可以称之为高阶函数
- 参数是一个函数
- 返回值是一个函数

## 闭包



### 什么是闭包？
> 闭包是指有权访问另一个函数作用域中变量的函数，闭包实际就是函数 <br>
> 简单理解就是，`有权访问另一个作用域的函数`

在理解闭包前，我们最好可以先复习一下js的作用域

### 变量作用域
- 变量作用域分为全局变量和局部变量
- 函数内部可以使用全局变量
- 函数外部不能使用局部变量
- 函数执行完毕后，局部变量会进行销毁

比如一个函数中用到了变量`a` ，它就会优先在本函数的作用域中寻找，如果没有再到上一级中找，以此反复，直到找到全局作用域都没有，出现报错。

看下面这个例子

```js
var num = 10;

function a() {
  console.log(num);
}

function b() {
  var num = 20;
  a(); 
}
b()

```
答案是输出10，因为a定义的上级作用域是全局

比如有以下一个需求，我们需要一个变量`num`和一个函数`add`，每次调用`add()`时`num+1`

我们只需要写成下面这样就可以了

```js
var num = 0
function add() {
  num++
  return num
}
console.log(add()); // 输出1
console.log(add()); // 输出2  
console.log(add()); // 输出3
```

但是这需要一个全局作用域的变量，我们并不想污染全局作用域，那么应该怎么做？

这时闭包就登场了。

```js
function add() {
  var num = 0
  return  function(){
    num++
    return num
  }
}
let add2 = add()
console.log(add2());  // 输出1
console.log(add2());  // 输出2
console.log(add2());  // 输出3
```

这里我们既没有定义全局变量，还完成了需求，`add` 返还的函数，用到了add定义的变量`num`形成了闭包

### 闭包的作用

1. 保护函数的的变量不被销毁
2. 变量私有不受外部干扰

### 闭包的劣势

1. 耗费内存，过度使用闭包可能造成内存泄漏

