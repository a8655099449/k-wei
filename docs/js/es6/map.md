---
title: es6新类型 - Map和Set
date: 2021-04-29
tags:
 - 前端
 - js
categories: code
pic: 
desc: 
---


## Set

Map属于es6的一种新的数据类型，类似于没有重复值的数组

```js
new Set([1,2,1,3])  // {1,2,3}
```
可以使用Set来进行数组去重

```js
[...new Set(1,2,3,1,2,3)] // [1,2,3]
```

### 去重时的注意点
:::warning
Set比较重复时是进行严格等于 所以 `5` 和 `'5'` 会同时被添加进去，但`NaN` 和 `NaN` 会被视作一个NaN。 `{}` 和 `{}`  会被当成两个空对象添加进去
:::

```js
console.log([...new Set([5, '5'])]) // [ 5, '5' ]
console.log([...new Set([NaN, NaN])]) // [ NaN ]
console.log([...new Set([{}, {}])]) // [ {}, {} ]
```
### Set实例的属性和方法

|  name | 说明  |
| ------------ | ------------ |
|  constructor  |  返回构造函数 ，默认就是`Set`|
|   size |  返还成员总数 |
|   add(item) |  添加成员 ，返回set结构本身|
|   delete(item) |  删除成员 ，返回布尔值，表示是否删除成功 |
|   has(item) |  是否为Set成员 返回布尔值 |
|   clear() |  清除所有成员，没有返回值 |
|   keys() | 返回键名的遍历器 |
|   values() |   返回键值的遍历器 |
|   entries() |  返回键值对的遍历器 |
|   forEach() |  使用回调函数遍历每个成员 |

**因为Set没有键名所以`keys`和`values`的行为完全一致,`entries`的键名和键值完全相等**

**forEach和数组的forEach使用基本相同**

## weakSet
weakSet 和 set类似，也是成员不能重复的集合，它们的区别在于：

1. 成员只能是对象
2. 成员中的对象都是弱引用，即如果没有其他对象应用则会被垃圾回收机制回收，所以它很适合用来作为临时存储而不用担心内存泄漏，比如dom节点的存储
3. 不能变遍历，因为是弱引用所以无法保证它成员的遍历性


## Map
Map类似于数组，js中的数组只能使用字符串作为属性名，而Map可以接受其他类型的数据作为属性名








