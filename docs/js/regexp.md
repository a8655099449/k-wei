---
title: 《js正则不完全指南》
date: 2021-03-12
tags:
  - 前端
categories: code
pic: //photo.tuituisoft.com/picgo/20210312113244.png
desc:
---

正则表达式 `RegExp = regular expression`的缩写

正则在我们的开发中非常常见，

如 vue 的模板编译，webpack 打包，无不是对正则的应用，如果将正则学习好，可以对开发起到非常大的帮助

是我认为在编程中性价比较高的技能

## 定义一个正则对象

1. 使用 `new` 实例化一个正则对象
   > 参数 1（匹配的内容） ： 字符串 <br>
   > 参数 2（修饰符） ： 字符串的 `igs`

igs 的实际含义
| 字符 | 含义 |
| ------------ | ------------ |
| i（ignore case） | 忽略大小写 |
| g（global） | 匹配全局（正则默认在匹配到第一个成功的对象后停止匹配，加上 global 后可以匹配所有的内容） |
| m（multi-line） | 匹配多行 |

```js
let reg = new RegExp("test", "igs");
```

1. 使用字面量方法定义

```js
let reg = /test/gis;
```

这两种方式，通常我们认为第二种更加的简洁明了

但是第二种定义中我们没法使用变量方法。假如我们需要匹配的内容并不是固定的，就需要使用第一种方法

```js
let t = "test";
let reg = /t/; // 不可行
let reg2 = new RegExp(t); //可行
```

## 正则中的表达式

### 1. `[]` 中括号

中括号在正则里面代表匹配一个区间，且每个中括号内只匹配一位字符

```js
let reg = /[abc][def]]/;
// 这个并不是匹配长度6位的字符  而是只匹配两个字符，这两个字符以abc开头 后面跟着def

reg.test("ac"); // false
reg.test("bd"); // true
reg.test("af"); // true
```

### 2. `-`字符

区间的写法可以是 `[0123456789]` <br>
也可以使用`-` 字符来代表一个区间 例如刚刚的语句我们就可以写成 `[0-9]` <br>
常见的区间还有 `[a-z]` 和 `A-Z` ,或者你想不区分大小写的字母`[A-z]` **注意这里我们把大写`A`放在前头，这个顺序是不能乱的**

:::warning
`-`字符的区间遵循着从小到大的规则，否则就会报错，比如你不能这样写 `/[9-0]/`
:::

还可以这样写 匹配 `0-3` 和`6-9` 中间的数字

```js
let reg = /[0-36-9]/;
```

## 量词

量词指的是我们可以根据某些规则，减少一些重复性字符的输入

比如匹配 n 个数值，或者限制长度

| 量词符 | 含义 | 示例 |
| :----: | ---- | ---- |
|   `+`    | 匹配一个或者多个   | `/n+/` (必须存在1个或者多个n)|
|   `*`    | 匹配0个或者多个   | `/n*/` (0个或者多个都能被匹配上)|
|   `?`    | 匹配0个或者1个   | `/n?/` (0个n或者1个n可以被匹配上)|
|   `{x}`    | 必须包含x个n   | `/n{3}/` (必须存在`3`个n,**`x`必须为整数 且不能存在空格**)|
|   `{x,y}`    | 必须包含`x 至 y`个n   | `/n{3,5}/` (必须存在`3 到 5`个n)|
|   `{x,}`    | 必须包含`x 至 正无穷`个n   | `/n{1,}/` 这个就等价于 `/n+/` |
|   `$`    |  以该字符结尾   | `/n$/` 匹配以n结尾的字符 |
|   `^`    |  以该字符开头   | `/^n/` 匹配以n开头的字符 |
|   `?=`    |  必须要紧随指定字符的字符串   | `/a?=n/` 匹配a后面紧随一个n的字符 |






<!-- ### `^` 字符

`^` 如果在方括号内意味取反

```js
let reg = /[^a]/  // 不能包含a
```
如果不是在方括号内，意味表示以什么开头，

```js
let reg = /^a/  // 匹配以a靠头的字符
```

### `+` 字符
 `+` 号代表一个或者多个
```js
let str = /\w+/ //代表必须要有一个数字，或者多个数字
```
### `*`字符
`*` 号代表0个或多个

### `$`字符
 -->

## 元字符

[元字符参考手册](https://www.w3school.com.cn/jsref/jsref_obj_regexp.asp)

| 字符 | 含义                                            |
| :--: | ----------------------------------------------- |
|  \n  | 换行符                                          |
|  \r  | 回车符                                          |
|  \t  | 制表符（按下一个`tab`的距离）                   |
|  \w  | 字母 + 数字 + `_` 等价于 `[\w]` === `[0-9A-z_]` |
|  \W  | 等价于 `[^\w]`                                  |
|  \d  | 等价于 `[0-9]`                                  |
|  \D  | 等价于 `[^\d]`                                  |
|  \s  | 等价于 `[\r\n\t\v\f]` 以及空白符                |
|  \S  | 等价于 `[^\s]`                                  |
|  \b  | 匹配单词边界                                    |
|  \B  | 匹配非单词边界                                  |
|  .   | 任意非`换行符`或`结束符`的字符                  |

## 正则匹配的规则

1. 不回头

匹配过的字符不会再重新匹配，比如以下这个例子

```js
let reg = /[abc][cef]/g;
let str = "acef";
str.match(reg);

// 在这个案例中，ac 和  ce 都符合正则匹配的要求
// 但是在这里只会匹配出 ac
```

2. 贪婪

能匹配多就不匹配少
